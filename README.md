# 草野球マッチングアプリ - 設計ドキュメント集

## 🎯 プロジェクト概要

草野球チームの試合参加者を募集・管理し、当日の来場確認（チェックイン機能）を位置情報で行うマッチングアプリの**完全設計ドキュメント**です。

**本リポジトリの最大の特徴は、要件定義から基本設計、詳細設計、そして実装コードまでを、AIを活用して一気通貫で生成可能な設計書として構成されていることです。**

---

## ✨ 本リポジトリの特徴

### 🤖 AI駆動開発の完全実現

本設計書群は、**Claude (Anthropic社のAI)** を用いた開発プロセスを前提に構成されています。

```
要件定義書
    ↓ AIプロンプト変換
基本設計書（1章〜19章）
    ↓ AIプロンプト変換
詳細設計書（1章〜19章）
    ↓ AIコード生成
実装コード（Laravel + Flutter）
    ↓ AI生成
シナリオテスト・E2Eテスト
```

各設計書には **「コード生成AIへの共通コンテキスト」** セクションが含まれており、そのまま生成AIに渡すことで高品質なコードを自動生成できます。

---

## 📊 設計書の再現性

### AIコード生成の再現性スコア

| 対象 | 再現性 | 備考 |
|------|--------|------|
| 要件定義書 → 基本設計書 | **8-9/10** | アーキテクチャ図やDB設計が高精度で生成可能 |
| 基本設計書 → 詳細設計書 | **8-10/10** | API仕様やエラーコード定義が完全に生成可能 |
| 詳細設計書 → 実装コード | **9/10 (Laravel)** | Service層、Repository層が90%再現 |
| | **8-9/10 (Flutter)** | Provider、Widget構成が80-90%再現 |
| 詳細設計書 + コード → テストコード | **8/10** | 単体テスト・E2Eテストが高精度で生成可能 |

**※ 再現性スコアは、生成AIに詳細設計書の「コード生成AIへの共通コンテキスト」を渡した場合の、設計意図通りのコード生成率を示します。**

---

## 🎓 設計書の特徴的な工夫

### 1. コード生成AIへの共通コンテキスト

各章の最後に、**AIに渡すべき具体的な指示** を記載しています。

**例（第5章 API設計より）:**

```markdown
### 5.6. コード生成AIへの共通コンテキスト

**目的:**
第5章の定義に基づき、APIエンドポイントの実装コードを生成する。

**指示:**
- Controller は薄く保ち、Service 層でビジネスロジックを実装してください。
- Service 層のメソッドは、Repository を DI（コンストラクタインジェクション）で受け取ってください。
- 「5.5. エラーレスポンス統一仕様」に従い、例外発生時は必ず error.code, error.message を含むJSONを返してください。
```

---

### 2. Mermaid図による可視化

システム全体を視覚的に理解できるよう、重要な設計はMermaid記法で図示しています。

- システム全体構成図
- ER図（データベース設計）
- 画面遷移図
- 認証フロー図
- チェックイン判定フロー図

---

### 3. 完全なエラー仕様

**30種類のエラーコード** を定義し、HTTPステータス、メッセージ、発生条件を明確化しています。

```
E-400-01: バリデーションエラー（必須項目未入力）
E-401-01: 未認証
E-403-01: 権限不足（管理者のみ）
E-409-01: Email重複
E-500-01: 外部API連携失敗（FCM）
...
```

---

### 4. 用語の厳格な統一（第19章）

コード生成時の用語ブレを防ぐため、技術用語・ドメイン用語を明確に定義しています。

**禁止用語の例:**
- ❌ 「来場確認」「出席」 → ⭕ 「チェックイン」
- ❌ `id` → ⭕ `user_id`, `game_id`（省略禁止）

---
- 誤字脱字の修正
- 設計の改善提案（Issue）
- AIコード生成の再現性向上のための提案

